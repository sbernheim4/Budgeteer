{"version":3,"sources":["webpack:///./src/Budgeteer/Settings/AccountNames/accountNames.scss?e84d","webpack:///./src/Budgeteer/Settings/AccountNames/accountNames.scss","webpack:///./src/Budgeteer/Settings/settings.scss?17a6","webpack:///./src/Budgeteer/Settings/settings.scss","webpack:///./src/Budgeteer/Settings/AccountNames/AccountNames.jsx","webpack:///./src/Budgeteer/Settings/Settings.jsx"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","AccountNames","props","_this","_classCallCheck","this","_getPrototypeOf","call","state","accounts","mapOfAccountNamesToDisplayNames","Map","handleChange","bind","_assertThisInitialized","getDisplayName","jsonToMap","Component","map","JSON","stringify","_toConsumableArray","jsonStr","parse","axios","get","names","data","setState","console","log","_context","t0","accountName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","account","value","name","account_id","err","return","e","_this2","document","querySelectorAll","forEach","val","displayName","placeholder","parentNode","querySelector","innerText","accountID","getAccountIDFromAccountName","set","post","id","target","_this3","react_default","a","createElement","className","acct","index","key","onChange","type","onClick","handleClick","Settings","Settings_classCallCheck","Settings_getPrototypeOf","linkedBanks","monthlyBudget","display","message","color","updateInputValue","Settings_assertThisInitialized","updateMonthlyBudget","displayMessage","localStorage","getItem","bankName","bank","bankIndex","concat","Settings_toConsumableArray","slice","window","clear","sessionStorage","cleaar","_context2","ERROR","updatedMonthlyBudget","trim","preventDefault","setItem","method","url","msg","setTimeout","ErrorMessage","text","removeAccount","onSubmit","Settings_AccountNames_AccountNames","rotateAccessTokens"],"mappings":"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","file":"10.js","sourcesContent":["\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/lib/loader.js!./accountNames.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/lib/loader.js!./accountNames.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/lib/loader.js!./accountNames.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".accounts {\\n  margin-top: 30px; }\\n\\n.account-names {\\n  margin: 15px 0;\\n  height: 60px;\\n  border-radius: 5px;\\n  display: flex;\\n  align-items: center; }\\n  .account-names--name {\\n    margin: 0 30px;\\n    width: 40%; }\\n  .account-names--input {\\n    margin: 0 10px;\\n    width: 35%;\\n    padding: 10px;\\n    font-size: 18px;\\n    color: black; }\\n  .account-names--submit {\\n    position: relative;\\n    margin-bottom: 6px;\\n    padding: 10px 20px;\\n    background-color: #46926b;\\n    border-radius: 5px;\\n    font-size: 18px;\\n    color: white;\\n    cursor: pointer;\\n    transition: background-color .1s ease;\\n    box-shadow: 0 6px #357052; }\\n    .account-names--submit:hover {\\n      background-color: #418863;\\n      box-shadow: 0 6px #31654a; }\\n    .account-names--submit:active {\\n      top: 3px;\\n      box-shadow: 0 0 #357052; }\\n\\n.account-names:nth-child(2n+1) {\\n  background: #365269; }\\n\", \"\"]);\n\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!./settings.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!./settings.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!./settings.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".settings {\\n  position: relative;\\n  margin: 0 30px; }\\n  @media all and (min-width: 801px) {\\n    .settings {\\n      margin: 0 60px; } }\\n  .settings h1 {\\n    font-size: 2em; }\\n  .settings--linked-accounts {\\n    margin: 20px auto;\\n    max-width: 1000px;\\n    width: 80%;\\n    padding: 10px;\\n    border-bottom: 2px solid white;\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: space-between;\\n    align-items: center; }\\n    .settings--linked-accounts h2 {\\n      margin: 5px 0; }\\n    .settings--linked-accounts button {\\n      padding: 15px 20px;\\n      background-color: #d84545;\\n      border-radius: 5px;\\n      font-size: 1em;\\n      cursor: pointer; }\\n  .settings--monthly-budget {\\n    margin-top: 60px;\\n    width: 300px; }\\n    .settings--monthly-budget label h1 {\\n      margin-bottom: 10px; }\\n    .settings--monthly-budget label input {\\n      padding: 10px;\\n      border-radius: 5px;\\n      /*width: 150px;*/\\n      /*height: 30px;*/\\n      font-size: 20px;\\n      color: black; }\\n    .settings--monthly-budget label .submit {\\n      margin-left: 5px;\\n      background: #607D8B;\\n      color: white;\\n      cursor: pointer; }\\n  .settings--rotate-tokens {\\n    margin: 60px 15px 0 0; }\\n    .settings--rotate-tokens button {\\n      margin-top: 10px;\\n      padding: 20px;\\n      background-color: #46926b;\\n      border-radius: 5px;\\n      font-size: 1em;\\n      cursor: pointer;\\n      transition: background-color .3s ease; }\\n      .settings--rotate-tokens button:hover {\\n        background-color: #357052; }\\n\", \"\"]);\n\n","/*eslint no-undefined: 0*/\nimport React, { Component } from \"react\";\nimport axios from 'axios';\n\nimport './accountNames.scss';\n\nclass AccountNames extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\taccounts: [],\n\t\t\tmapOfAccountNamesToDisplayNames: new Map()\n\t\t}\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.getDisplayName = this.getDisplayName.bind(this);\n\t\tthis.jsonToMap = this.jsonToMap.bind(this);\n\t}\n\n\tmapToJson(map) {\n\t\treturn JSON.stringify([...map]);\n\t}\n\n\tjsonToMap(jsonStr) {\n\t\treturn new Map(JSON.parse(jsonStr));\n\t}\n\n\tasync componentDidMount() {\n\t\ttry {\n\t\t\tlet names = await axios.get('/user-info/display-names');\n\t\t\tnames = names.data;\n\n\t\t\tconst map = this.jsonToMap(names);\n\t\t\tthis.setState({\n\t\t\t\tmapOfAccountNamesToDisplayNames: map\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tconsole.log(\"Error: \");\n\t\t\tconsole.log(err);\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state) {\n\t\treturn {\n\t\t\taccounts: props.accounts\n\t\t}\n\t}\n\n\tgetAccountIDFromAccountName(accountName) {\n\t\tfor (const account of this.props.accounts) {\n\t\t\tif (account.name === accountName) return account.account_id;\n\t\t}\n\t}\n\n\tgetDisplayName(account_id) {\n\t\treturn this.state.mapOfAccountNamesToDisplayNames.get(account_id) || \"\";\n\t}\n\n\thandleClick(e) {\n\t\tconst map = this.state.mapOfAccountNamesToDisplayNames !== undefined ? this.state.mapOfAccountNamesToDisplayNames : new Map();\n\t\tconst vals = document.querySelectorAll(\".account-names--input\");\n\n\t\tvals.forEach(val => {\n\t\t\tconst displayName = val.value || val.placeholder;\n\n\t\t\t// Skip the entry if there is no value\n\t\t\tif (displayName === \"\" || displayName === null || displayName === undefined) return;\n\n\t\t\tconst accountName = val.parentNode.querySelector(\".account-names--name\").innerText;\n\t\t\tconst accountID = this.getAccountIDFromAccountName(accountName);\n\t\t\tmap.set(accountID, displayName);\n\t\t});\n\n\t\taxios.post('/user-info/display-names', {\n\t\t\tdata: {\n\t\t\t\tmap: JSON.stringify(map)\n\t\t\t}\n\t\t});\n\t}\n\n\thandleChange(e, id) {\n\t\tthis.setState({\n\t\t\t[id]: e.target.value\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"accounts\">\n\t\t\t\t<h1>Account Display Names</h1>\n\t\t\t\t{this.state.accounts.map((acct, index) =>\n\t\t\t\t\t<div className=\"account-names\" key={index}>\n\t\t\t\t\t\t<h3 className=\"account-names--name\">{acct.name}</h3>\n\t\t\t\t\t\t<h3 className=\"account-names--display\">Display Name: </h3>\n\t\t\t\t\t\t<input className=\"account-names--input\" id={index} placeholder={this.getDisplayName(acct.account_id)} onChange={(e) => this.handleChange(e, acct.account_id)} type='text'/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<button onClick={(e) => this.handleClick(e)} className=\"account-names--submit\">Update</button>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default AccountNames;\n","/* eslint no-undefined: \"off\" */\n\nimport React, { Component } from \"react\";\nimport AccountNames from \"./AccountNames/AccountNames.jsx\";\nimport ErrorMessage from \"../ErrorMessage/ErrorMessage.jsx\";\nimport axios from 'axios';\n\nimport './settings.scss';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n\tfaTimes\n} from '@fortawesome/free-solid-svg-icons'\n\nclass Settings extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlinkedBanks: [],\n\t\t\tmonthlyBudget: \"Loading...\",\n\t\t\tdisplay: false,\n\t\t\tmessage: \"\",\n\t\t\tcolor: \"green\"\n\t\t}\n\n\t\tthis.updateInputValue = this.updateInputValue.bind(this);\n\t\tthis.updateMonthlyBudget = this.updateMonthlyBudget.bind(this);\n\t\tthis.displayMessage = this.displayMessage.bind(this);\n\t}\n\n\tasync componentDidMount() {\n\t\t// Try looking in local storage first for the monthlyBudget\n\t\tlet monthlyBudget = localStorage.getItem(\"monthlyBudget\");\n\t\tif (!monthlyBudget) {\n\t\t\t// If that fails grab it from the server\n\t\t\tmonthlyBudget = await axios.get('/user-info/monthly-budget');\n\t\t\tmonthlyBudget = monthlyBudget.data.monthlyBudget;\n\t\t}\n\n\t\tlet linkedBanks = await axios.get('/plaid-api/linked-accounts');\n\t\tthis.setState({\n\t\t\tlinkedBanks: linkedBanks.data.accounts,\n\t\t\tmonthlyBudget: monthlyBudget\n\t\t});\n\t}\n\n\tasync removeAccount(e) {\n\t\tlet bankName = e.target.parentNode.querySelector('h2').innerText;\n\n\t\tlet index;\n\t\tthis.state.linkedBanks.map( (bank, i) => {\n\t\t\tif (bank === bankName) {\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await axios.post('/plaid-api/remove-account', {\n\t\t\t\tdata: {\n\t\t\t\t\tbankIndex: index,\n\t\t\t\t\tbankName: this.state.linkedBanks[index]\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tlinkedBanks: [...this.state.linkedBanks.slice(0, index), ...this.state.linkedBanks.slice(index + 1)]\n\t\t\t})\n\t\t\twindow.localStorage.clear();\n\t\t\twindow.sessionStorage.cleaar();\n\t\t} catch(err) {\n\t\t\tconsole.log(\"DISPLAY ERROR MESSAGE\");\n\t\t\tconsole.log(err.ERROR);\n\t\t}\n\t}\n\n\tasync rotateAccessTokens() {\n\t\tlet returnVal = await axios.post('/plaid-api/rotate-access-tokens');\n\n\t\t//const alertMessage = document.querySelector('.app-error');\n\t\t//alertMessage.innerText = returnVal.data.result;\n\t\t//alertMessage.classList.add('app-error__display');\n\n\t\t//setTimeout(() => {\n\t\t\t//alertMessage.classList.remove('app-error__display')\n\t\t//}, 4000)\n\t}\n\n\tupdateInputValue(e) {\n\t\tconst updatedMonthlyBudget = e.target.value.trim();\n\t\t// Update state value\n\t\tthis.setState({\n\t\t\tmonthlyBudget: updatedMonthlyBudget\n\t\t});\n\t}\n\n\tupdateMonthlyBudget(e) {\n\t\te.preventDefault();\n\n\t\tconst updatedMonthlyBudget = document.querySelector(\"#monthly-budget\").value;\n\n\t\t// Update local storage value\n\t\tlocalStorage.setItem(\"monthlyBudget\", updatedMonthlyBudget);\n\n\t\t// Update Session/DB value\n\t\taxios({\n\t\t\tmethod: 'POST',\n\t\t\turl: '/user-info/monthly-budget',\n\t\t\tdata: {\n\t\t\t\tmonthlyBudget: updatedMonthlyBudget\n\t\t\t}\n\t\t});\n\n\t\t// Display a success message optimistically\n\t\tthis.displayMessage(\"Your monthly budget was updated\");\n\t}\n\n\tdisplayMessage(msg) {\n\t\tthis.setState({\n\t\t\tmessage: msg,\n\t\t\tdisplay: true\n\t\t});\n\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({\n\t\t\t\tdisplay: false,\n\t\t\t});\n\t\t}, 5500);\n\t}\n\n\trender() {\n\n\t\treturn (\n\n\t\t\t<section className='settings'>\n\n\t\t\t\t<ErrorMessage\n\t\t\t\t\tdisplay={this.state.display}\n\t\t\t\t\ttext={this.state.message}\n\t\t\t\t\tcolor={this.state.color}\n\t\t\t\t/>\n\n\t\t\t\t<h1>Linked Banks</h1>\n\t\t\t\t{this.state.linkedBanks.map( (bank, index) =>\n\t\t\t\t\t<div key={index} className='settings--linked-accounts'>\n\t\t\t\t\t\t<h2>{bank}</h2>\n\t\t\t\t\t\t<button onClick={(e) => this.removeAccount(e)}>Remove</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<form className='settings--monthly-budget' onSubmit={this.updateMonthlyBudget}>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<h1>Your Monthly Budget</h1>\n\t\t\t\t\t\t<input id=\"monthly-budget\" placeholder=\"Loading...\" type=\"number\" name=\"budget\" value={this.state.monthlyBudget} onChange={this.updateInputValue}/>\n\t\t\t\t\t\t<input className='submit' type='submit' value='Update' onClick={this.updateMonthlyBudget}/>\n\t\t\t\t\t</label>\n\t\t\t\t</form>\n\n\t\t\t\t<AccountNames accounts={this.props.accounts}/>\n\n\t\t\t\t<div className=\"settings--rotate-tokens\">\n\t\t\t\t\t<p>If you think your account has been compromised, click the button below to delete and generate new access tokens</p>\n\t\t\t\t\t<button onClick={this.rotateAccessTokens}>Rotate Access Tokens</button>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nexport default Settings;\n"],"sourceRoot":""}