{"version":3,"sources":["webpack:///./src/Budgeteer/Statistics/BudgetChart/budgetChart.scss","webpack:///./src/Budgeteer/Statistics/BudgetChart/BudgetChart.jsx","webpack:///./src/Budgeteer/Statistics/BudgetChart/budgetChart.scss?1b6a"],"names":["COLORS","CustomTooltip","active","props","spent","remaining","Component","BudgetChart","state","monthlyBudget","spentThisMonth","rechartsData","name","value","handleChange","bind","event","newMonthlyBudget","target","trim","localStorage","setItem","amts","setState","axios","method","url","data","formatAmount","numberWithCommas","input","displayInput","map","entry","index","length","nextProps","prevState","console","log","transactions","totalSpent","today","Date","t","transactionDate","date","slice","isSameMonth","isSameYear","amount","monthlyBudgetFromSessionStorage","getItem","chartData","error"],"mappings":"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","file":"3.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".budget--tooltip--spent:before, .budget--tooltip--remaining:before {\\n  content: \\\"\\\";\\n  margin-right: 5px;\\n  width: 12px;\\n  height: 12px;\\n  background-color: #46926b;\\n  border: 1px solid white;\\n  border-radius: 1px;\\n  display: inline-block;\\n  vertical-align: middle; }\\n\\n.budget {\\n  margin: 0 auto;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-around;\\n  align-items: center; }\\n  .budget--doughnut-chart {\\n    /*width: 100vw;*/ }\\n    @media all and (min-width: 930px) {\\n      .budget--doughnut-chart {\\n        width: 33% !important; } }\\n  .budget--form {\\n    /*@media all and (max-width: 930px) {\\n\\t\\t\\tmargin: 10px 0;\\n\\t\\t}*/ }\\n    .budget--form label {\\n      font-size: 20px;\\n      font-weight: bold;\\n      display: flex;\\n      flex-direction: column;\\n      align-items: center; }\\n      .budget--form label input {\\n        max-width: 90%;\\n        width: 250px;\\n        padding: 10px;\\n        border: 1px solid black;\\n        border-radius: 5px;\\n        font-size: 15px;\\n        color: black;\\n        box-sizing: border-box; }\\n        @media all and (max-width: 930px) {\\n          .budget--form label input {\\n            margin-left: 0; } }\\n  .budget--tooltip {\\n    padding: 15px;\\n    background-color: black;\\n    border-radius: 5px; }\\n    .budget--tooltip--spent:before {\\n      background-color: #f98183; }\\n    .budget--tooltip--remaining:before {\\n      background-color: #46926b; }\\n\\n.recharts-wrapper {\\n  overflow-y: hidden; }\\n\", \"\"]);\n\n","import React, { Component } from \"react\";\nimport { ResponsiveContainer, PieChart, Pie, Sector, Cell, Legend, Label, Tooltip, text, tspan} from \"recharts\"\nimport axios from 'axios';\n\nimport {formatAmount, numberWithCommas } from \"../../helpers.js\";\n\nimport isSameMonth from \"date-fns/is_same_month\";\nimport isSameYear from \"date-fns/is_same_year\";\n\nimport \"./budgetChart.scss\";\n\nconst COLORS = [\n\t\"#D46363\",\n\t\"#007255\",\n];\n\nclass CustomTooltip extends Component {\n\n\trender() {\n\t\tconst { active } = this.props;\n\n\t\tif (active) {\n\t\t\treturn (\n\n\t\t\t\t<div className=\"budget--tooltip\">\n\t\t\t\t\t<p className=\"budget--tooltip--spent\" >Spent: ${this.props.spent}</p>\n\t\t\t\t\t<p className=\"budget--tooltip--remaining\">Remaining: ${this.props.remaining}</p>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t}\n};\n\nclass BudgetChart extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tmonthlyBudget: \"\",\n\t\t\tspentThisMonth: 0,\n\t\t\trechartsData: [\n\t\t\t\t{name: 'Spent', value: 0},\n\t\t\t\t{name: 'Remaining', value: 1}\n\t\t\t]\n\t\t};\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tconsole.log(\"nextProps are: \");\n\t\tconsole.log(nextProps);\n\n\t\tif (nextProps.transactions.length > 0) {\n\t\t\tlet totalSpent = 0;\n\t\t\tlet today = new Date();\n\n\t\t\t// Calculate total spent this month\n\t\t\tfor (let t of nextProps.transactions) {\n\t\t\t\tconst transactionDate = new Date(t.date.slice(0, 4), t.date.slice(5, 7) - 1, t.date.slice(8, 10));\n\n\t\t\t\tif (isSameMonth(transactionDate, today) && isSameYear(transactionDate, today)) {\n\t\t\t\t\ttotalSpent += t.amount * -1; // Spending is a negative value\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Retrieve monthly budget from session storage\n\t\t\tconst monthlyBudgetFromSessionStorage = localStorage.getItem(\"monthlyBudget\"); // Get monthly budget from session storage\n\n\t\t\t// Calculate remaining amount left to spend\n\t\t\t/*let remaining = (monthlyBudgetFromSessionStorage - totalSpent) <= 0 ? 0 : (monthlyBudgetFromSessionStorage - totalSpent);*/\n\t\t\tconst remaining = monthlyBudgetFromSessionStorage - totalSpent;\n\n\t\t\t// Create chart data set\n\t\t\tconst chartData = [\n\t\t\t\t{\n\t\t\t\t\tname: 'Spent',\n\t\t\t\t\tvalue: totalSpent\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tname: 'Remaining',\n\t\t\t\t\tvalue: remaining\n\t\t\t\t},\n\t\t\t];\n\n\t\t\t// Set the state\n\t\t\treturn {\n\t\t\t\tspentThisMonth: totalSpent,\n\t\t\t\trechartsData: chartData,\n\t\t\t\tmonthlyBudget: monthlyBudgetFromSessionStorage\n\t\t\t};\n\n\t\t} else {\n\t\t\tconsole.error(\"Error from Budget Chart: transactions.length is <= 0\")\n\t\t\treturn null;\n\t\t}\n\t}\n\n\thandleChange(event) {\n\t\tconst newMonthlyBudget = event.target.value.trim();\n\t\t// Save data to the current local store\n\t\tlocalStorage.setItem(\"monthlyBudget\", newMonthlyBudget);\n\n\t\t// Update the percentage calculator\n\t\tconst spent = this.state.spentThisMonth;\n\t\tconst remaining = (newMonthlyBudget - this.state.spentThisMonth) <= 0 ? 0 : (newMonthlyBudget - this.state.spentThisMonth);\n\n\t\t// Update the chart\n\t\tlet amts = [\n\t\t\t{name: 'Spent', value: spent},\n\t\t\t{name: 'Remaining', value: remaining},\n\t\t];\n\n\t\tthis.setState({\n\t\t\trechartsData: amts,\n\t\t\tmonthlyBudget: newMonthlyBudget\n\t\t});\n\n\t\taxios({\n\t\t\tmethod: 'POST',\n\t\t\turl: '/user-info/monthly-budget',\n\t\t\tdata: {\n\t\t\t\tmonthlyBudget: newMonthlyBudget\n\t\t\t}\n\t\t});\n\t}\n\n\trender() {\n\t\tlet spent = formatAmount(this.state.spentThisMonth)\n\t\tspent = numberWithCommas(spent);\n\n\t\tlet remaining = (this.state.monthlyBudget - this.state.spentThisMonth);\n\t\tremaining = formatAmount(remaining);\n\t\tremaining = numberWithCommas(remaining);\n\n\t\tconst input = this.props.displayInput === false ? \"\" : (<form className=\"budget--form\">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input placeholder=\"Enter your budget\" type=\"number\" name=\"budget\" value={this.state.monthlyBudget} onChange={this.handleChange} />\n\t\t\t\t\t</label>\n\t\t\t\t</form>);\n\n\t\treturn (\n\t\t\t<div className=\"budget\">\n\n\t\t\t\t{input}\n\n\t\t\t\t{/*<Doughnut className=\"budget--doughnut-chart\" data={this.state.data} />*/}\n\t\t\t\t<ResponsiveContainer className=\"budget--doughnut-chart\" width=\"100%\" min-height={400} height={400} >\n\t\t\t\t\t<PieChart>\n\t\t\t\t\t\t<Pie\n\t\t\t\t\t\t\tdata={this.state.rechartsData}\n\t\t\t\t\t\t\tinnerRadius=\"50%\"\n\t\t\t\t\t\t\touterRadius=\"90%\"\n\t\t\t\t\t\t\tfill=\"#8884d8\"\n\t\t\t\t\t\t\tpaddingAngle={0}>\n\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.rechartsData.map((entry, index) => <Cell key={index} fill={COLORS[index % COLORS.length]}/>)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{/*<Label className=\"center-label\" fill={\"white\"} value={this.state.totalSpent} position=\"center\" />*/}\n\t\t\t\t\t\t</Pie>\n\t\t\t\t\t\t<Tooltip content={<CustomTooltip remaining={remaining} spent={spent}/>}/>\n\n\t\t\t\t\t</PieChart>\n\t\t\t\t</ResponsiveContainer>\n\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default BudgetChart;\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/lib/loader.js!./budgetChart.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/lib/loader.js!./budgetChart.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js!../../../../node_modules/sass-loader/lib/loader.js!./budgetChart.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}