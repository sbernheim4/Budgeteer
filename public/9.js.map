{"version":3,"sources":["webpack:///./src/Budgeteer/Networth/networth.scss","webpack:///./src/Budgeteer/Networth/Networth.jsx","webpack:///./src/Budgeteer/Networth/networth.scss?43ad","webpack:///./src/Budgeteer/helpers.js"],"names":["Networth","props","state","total","accountBalances","recurringPayments","loading","nextProps","duplicates","Set","transactions","forEach","val","numOccurances","secondVal","JSON","stringify","add","payment","push","parse","setState","window","sessionStorage","getItem","data","axios","method","url","Error","get","keyAndEnv","plaid","Plaid","create","apiVersion","clientName","env","product","key","publicKey","token","publicToken","onSuccess","public_token","console","log","open","setItem","networth","maps","length","netWorthChart","map","keyName","index","Object","keys","acctName","toTitleCase","isNumber","numberWithCommas","formatAmount","Component"],"mappings":"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","file":"9.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".networth {\\n  position: relative; }\\n  @media all and (min-width: 801px) {\\n    .networth {\\n      margin-top: 0; } }\\n  .networth--loading {\\n    padding: 30px;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center; }\\n    .networth--loading h1 {\\n      text-align: center; }\\n    .networth--loading img {\\n      margin-top: 20px;\\n      border-radius: 20px; }\\n  .networth table {\\n    margin: 0 auto;\\n    padding: 30px;\\n    border-collapse: collapse; }\\n    .networth table thead tr {\\n      border-bottom: 1px solid #ff8484; }\\n      .networth table thead tr th {\\n        width: 200px;\\n        padding-bottom: 10px;\\n        font-size: 30px;\\n        text-align: center; }\\n    .networth table tbody tr td {\\n      width: 300px;\\n      height: 40px;\\n      padding: 10px;\\n      font-size: 30px;\\n      text-align: center; }\\n    .networth table tbody tr .acct-name {\\n      text-align: center; }\\n    .networth table tbody tr:nth-child(even) {\\n      background: #1c2b36; }\\n    .networth table tbody tr:hover {\\n      background: #17232c; }\\n  .networth--recurring-payments {\\n    margin: 30px;\\n    width: 260px; }\\n    .networth--recurring-payments hr {\\n      margin-bottom: 30px;\\n      height: 1px;\\n      background-color: gray; }\\n\", \"\"]);\n\n","import axios from 'axios';\nimport React, { Component } from \"react\";\nimport { numberWithCommas, formatAmount, toTitleCase, isNumber } from \"../helpers.js\";\n\nimport './networth.scss';\n\nclass Networth extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttotal: 0, // Keep track of total net worth\n\t\t\taccountBalances: [], // Map of account name to its balance\n\t\t\trecurringPayments: [], // Keep track of recurring costs like Spotify or Netflix etc\n\t\t\tloading: true\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\n\t\tlet duplicates = new Set();\n\t\tnextProps.transactions.forEach(val => {\n\t\t\tlet numOccurances = 0;\n\n\t\t\tnextProps.transactions.forEach(secondVal => {\n\t\t\t\tif (JSON.stringify(val) === JSON.stringify(secondVal)) {\n\t\t\t\t\tnumOccurances += 1;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// TODO: Change the 1 to the minimum number of times you want the number of\n\t\t\t// occurances to be before its considered a recurring payment.\n\t\t\t//\n\t\t\t// Should also work to check that the payment has been made in the past two\n\t\t\t// most recent months (NOT INCLUDING THE CURRENT MONTH)\n\t\t\tif (numOccurances > 1) {\n\t\t\t\tduplicates.add(JSON.stringify(val));\n\t\t\t}\n\t\t});\n\n\t\tlet recurringPayments = [];\n\t\tduplicates.forEach(payment => {\n\t\t\trecurringPayments.push(JSON.parse(payment));\n\t\t});\n\n\t\tthis.setState({\n\t\t\trecurringPayments: recurringPayments\n\t\t});\n\n\t}\n\n\tasync componentDidMount() {\n\n\t\tlet data;\n\n\t\t// Keep the data stored in the client's browser for the duration of the session\n\t\tif (window.sessionStorage.getItem(\"balance\")){\n\t\t\tdata = window.sessionStorage.getItem(\"balance\");\n\t\t\tdata = JSON.parse(data);\n\t\t} else {\n\t\t\tdata = await axios({\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: '/plaid-api/balance'\n\t\t\t});\n\n\t\t\tdata = data.data\n\t\t\tif (data.Error) {\n\t\t\t\tlet keyAndEnv = await axios.get('/plaid-api/key-and-env');\n\n\t\t\t\tconst plaid = Plaid.create({\n\t\t\t\t\tapiVersion: 'v2',\n\t\t\t\t\tclientName: 'Update Account',\n\t\t\t\t\tenv: keyAndEnv.data.env,\n\t\t\t\t\tproduct: ['balance'],\n\t\t\t\t\tkey: keyAndEnv.data.publicKey,\n\t\t\t\t\ttoken: data.publicToken,\n\t\t\t\t\tonSuccess: function (public_token) {\n\t\t\t\t\t\tconsole.log(\"Update of Account successful\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tplaid.open();\n\t\t\t}\n\n\t\t\twindow.sessionStorage.setItem(\"balance\", JSON.stringify(data));\n\t\t}\n\n\t\tthis.setState({\n\t\t\ttotal: data.networth,\n\t\t\taccountBalances: data.maps,\n\t\t\tloading: false\n\t\t});\n\t}\n\n\trender () {\n\t\tlet recurringPayments;\n\n\t\tif (this.state.recurringPayments.length === 0) {\n\t\t\trecurringPayments = <p>No Recurring Payments Found</p>\n\t\t} else {\n\t\t\trecurringPayments = <ul> this.state.recurringPayments.map(val => <li>val.name</li>) </ul>\n\t\t}\n\n\t\tlet netWorthChart;\n\t\tif (this.state.loading) {\n\t\t\tnetWorthChart = <div className=\"networth--loading\"><h1>Hang tight, getting your data from the cloud</h1><img src='/loading-gifs/loading-three.gif' alt='loading' /></div>\n\t\t} else {\n\t\t\tnetWorthChart = (<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Account Name</th>\n\t\t\t\t\t\t\t<th>Amount</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{this.state.accountBalances.map( (keyName, index) => (\n\t\t\t\t\t\t\tObject.keys(keyName).map( (acctName, index) => (\n\t\t\t\t\t\t\t<tr key={index} className='networth--entry'>\n\t\t\t\t\t\t\t\t<td className='acct-name'>{toTitleCase(acctName)}</td>\n\t\t\t\t\t\t\t\t<td className='acct-value'>{isNumber(keyName[acctName]) === true ? '$' + numberWithCommas(formatAmount(keyName[acctName])) : \"N/A\"}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td className='acct-name'>Total</td>\n\t\t\t\t\t\t\t<td className='acct-value'>${numberWithCommas(formatAmount(this.state.total))}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>)\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='networth'>\n\t\t\t\t{netWorthChart}\n\n\t\t\t\t<div className='networth--recurring-payments'>\n\t\t\t\t\t<h2>Recurring Payments</h2>\n\t\t\t\t\t<hr />\n\t\t\t\t\t{recurringPayments}\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t)\n\t}\n}\n\nexport default Networth\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!./networth.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!./networth.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!./networth.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","export function numberWithCommas(number) {\n\treturn number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nexport function formatAmount(amt) {\n\treturn (Math.round(amt * 100) / 100).toFixed(2);\n}\n\nexport function toTitleCase(str) {\n\tif (str === \"\" || str === null) return \"\";\n\treturn str.toLowerCase().split(' ').map(function(word) {\n\t\treturn word.replace(word[0], word[0].toUpperCase());\n\t}).join(' ');\n}\n\nexport function isNumber(n) {\n\treturn !isNaN(parseFloat(n)) && !isNaN(n - 0)\n}\n\nexport function mapToJson(map) {\n\treturn JSON.stringify([...map]);\n}\n\nexport function jsonToMap(jsonStr) {\n\treturn new Map(JSON.parse(jsonStr));\n}\n"],"sourceRoot":""}