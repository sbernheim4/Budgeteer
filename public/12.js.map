{"version":3,"sources":["webpack:///./src/Budgeteer/helpers.js","webpack:///./src/Budgeteer/Networth/networth.scss?43ad","webpack:///./src/Budgeteer/Networth/networth.scss","webpack:///./src/Budgeteer/Networth/Networth.jsx"],"names":["numberWithCommas","number","toString","replace","formatAmount","amt","Math","round","toFixed","toTitleCase","str","toLowerCase","split","map","word","toUpperCase","join","isNumber","n","isNaN","parseFloat","jsonToMap","jsonStr","Map","JSON","parse","__webpack_require__","d","__webpack_exports__","content","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","Networth","props","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","state","total","accountBalances","recurringPayments","loading","Component","nextProps","duplicates","Set","transactions","forEach","val","numOccurances","secondVal","stringify","add","payment","setState","window","sessionStorage","getItem","data","axios","method","url","Error","get","keyAndEnv","Plaid","create","apiVersion","clientName","env","product","key","publicKey","token","publicToken","onSuccess","public_token","console","log","open","setItem","networth","maps","netWorthChart","length","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","src","alt","keyName","index","Object","keys","acctName"],"mappings":"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","file":"12.js","sourcesContent":["export function numberWithCommas(number) {\n\treturn number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nexport function formatAmount(amt) {\n\treturn (Math.round(amt * 100) / 100).toFixed(2);\n}\n\nexport function toTitleCase(str) {\n\tif (str === \"\" || str === null) return \"\";\n\treturn str.toLowerCase().split(' ').map(function(word) {\n\t\treturn word.replace(word[0], word[0].toUpperCase());\n\t}).join(' ');\n}\n\nexport function isNumber(n) {\n\treturn !isNaN(parseFloat(n)) && !isNaN(n - 0)\n}\n\nexport function mapToJson(map) {\n\treturn JSON.stringify([...map]);\n}\n\nexport function jsonToMap(jsonStr) {\n\treturn new Map(JSON.parse(jsonStr));\n}\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!./networth.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!./networth.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js!../../../node_modules/sass-loader/lib/loader.js!./networth.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".networth {\\n  position: relative; }\\n  @media all and (min-width: 801px) {\\n    .networth {\\n      margin-top: 0; } }\\n  .networth--loading {\\n    padding: 30px;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center; }\\n    .networth--loading h1 {\\n      text-align: center; }\\n    .networth--loading img {\\n      margin-top: 20px;\\n      border-radius: 20px; }\\n  .networth table {\\n    margin: 0 auto;\\n    padding: 30px;\\n    border-collapse: collapse; }\\n    .networth table thead tr {\\n      border-bottom: 1px solid #ff8484; }\\n      .networth table thead tr th {\\n        width: 200px;\\n        padding-bottom: 10px;\\n        font-size: 30px;\\n        text-align: center; }\\n    .networth table tbody tr td {\\n      width: 300px;\\n      height: 40px;\\n      padding: 10px;\\n      font-size: 30px;\\n      text-align: center; }\\n    .networth table tbody tr .acct-name {\\n      text-align: center; }\\n    .networth table tbody tr:nth-child(even) {\\n      background: #1c2b36; }\\n    .networth table tbody tr:hover {\\n      background: #17232c; }\\n  .networth--recurring-payments {\\n    margin: 30px;\\n    width: 260px; }\\n    .networth--recurring-payments hr {\\n      margin-bottom: 30px;\\n      height: 1px;\\n      background-color: gray; }\\n\", \"\"]);\n\n","import axios from 'axios';\nimport React, { Component } from \"react\";\nimport { numberWithCommas, formatAmount, toTitleCase, isNumber } from \"../helpers.js\";\n\nimport './networth.scss';\n\nclass Networth extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttotal: 0, // Keep track of total net worth\n\t\t\taccountBalances: [], // Map of account name to its balance\n\t\t\trecurringPayments: [], // Keep track of recurring costs like Spotify or Netflix etc\n\t\t\tloading: true\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\n\t\tlet duplicates = new Set();\n\t\tnextProps.transactions.forEach(val => {\n\t\t\tlet numOccurances = 0;\n\n\t\t\tnextProps.transactions.forEach(secondVal => {\n\t\t\t\tif (JSON.stringify(val) === JSON.stringify(secondVal)) {\n\t\t\t\t\tnumOccurances += 1;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// TODO: Change the 1 to the minimum number of times you want the number of\n\t\t\t// occurances to be before its considered a recurring payment.\n\t\t\t//\n\t\t\t// Should also work to check that the payment has been made in the past two\n\t\t\t// most recent months (NOT INCLUDING THE CURRENT MONTH)\n\t\t\tif (numOccurances > 1) {\n\t\t\t\tduplicates.add(JSON.stringify(val));\n\t\t\t}\n\t\t});\n\n\t\tlet recurringPayments = [];\n\t\tduplicates.forEach(payment => {\n\t\t\trecurringPayments.push(JSON.parse(payment));\n\t\t});\n\n\t\tthis.setState({\n\t\t\trecurringPayments: recurringPayments\n\t\t});\n\n\t}\n\n\tasync componentDidMount() {\n\n\t\tlet data;\n\n\t\t// Keep the data stored in the client's browser for the duration of the session\n\t\tif (window.sessionStorage.getItem(\"balance\")){\n\t\t\tdata = window.sessionStorage.getItem(\"balance\");\n\t\t\tdata = JSON.parse(data);\n\t\t} else {\n\t\t\tdata = await axios({\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: '/plaid-api/balance'\n\t\t\t});\n\n\t\t\tdata = data.data\n\t\t\tif (data.Error) {\n\t\t\t\tlet keyAndEnv = await axios.get('/plaid-api/key-and-env');\n\n\t\t\t\tconst plaid = Plaid.create({\n\t\t\t\t\tapiVersion: 'v2',\n\t\t\t\t\tclientName: 'Update Account',\n\t\t\t\t\tenv: keyAndEnv.data.env,\n\t\t\t\t\tproduct: ['balance'],\n\t\t\t\t\tkey: keyAndEnv.data.publicKey,\n\t\t\t\t\ttoken: data.publicToken,\n\t\t\t\t\tonSuccess: function (public_token) {\n\t\t\t\t\t\tconsole.log(\"Update of Account successful\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tplaid.open();\n\t\t\t}\n\n\t\t\twindow.sessionStorage.setItem(\"balance\", JSON.stringify(data));\n\t\t}\n\n\t\tthis.setState({\n\t\t\ttotal: data.networth,\n\t\t\taccountBalances: data.maps,\n\t\t\tloading: false\n\t\t});\n\t}\n\n\trender () {\n\t\tlet recurringPayments;\n\n\t\tif (this.state.recurringPayments.length === 0) {\n\t\t\trecurringPayments = <p>No Recurring Payments Found</p>\n\t\t} else {\n\t\t\trecurringPayments = <ul> this.state.recurringPayments.map(val => <li>val.name</li>) </ul>\n\t\t}\n\n\t\tlet netWorthChart;\n\t\tif (this.state.loading) {\n\t\t\tnetWorthChart = <div className=\"networth--loading\"><h1>Hang tight, getting your data from the cloud</h1><img src='/loading-gifs/loading-three.gif' alt='loading' /></div>\n\t\t} else {\n\t\t\tnetWorthChart = (<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Account Name</th>\n\t\t\t\t\t\t\t<th>Amount</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{this.state.accountBalances.map( (keyName, index) => (\n\t\t\t\t\t\t\tObject.keys(keyName).map( (acctName, index) => (\n\t\t\t\t\t\t\t<tr key={index} className='networth--entry'>\n\t\t\t\t\t\t\t\t<td className='acct-name'>{toTitleCase(acctName)}</td>\n\t\t\t\t\t\t\t\t<td className='acct-value'>{isNumber(keyName[acctName]) === true ? '$' + numberWithCommas(formatAmount(keyName[acctName])) : \"N/A\"}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td className='acct-name'>Total</td>\n\t\t\t\t\t\t\t<td className='acct-value'>${numberWithCommas(formatAmount(this.state.total))}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>)\n\t\t}\n\n\t\treturn (\n\t\t\t<div className='networth'>\n\t\t\t\t{netWorthChart}\n\n\t\t\t\t<div className='networth--recurring-payments'>\n\t\t\t\t\t<h2>Recurring Payments</h2>\n\t\t\t\t\t<hr />\n\t\t\t\t\t{recurringPayments}\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t)\n\t}\n}\n\nexport default Networth\n"],"sourceRoot":""}